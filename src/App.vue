<script setup lang="ts">
import Nav from "@/components/Nav.vue";
import InitialLoading from "@/components/InitialLoading.vue";
import { useLoadingStore } from '@/stores/loading'
import { storeToRefs } from 'pinia'
import { useColorModeStore } from "@/stores/color-mode.ts";
import { onBeforeUnmount, onMounted } from "vue";

const loadingStore = useLoadingStore()
const { isInitialLoad } = storeToRefs(loadingStore)

const colorMode = useColorModeStore()

onMounted(() => {
  colorMode.init()
})

onBeforeUnmount(() => {
  colorMode.destroy()
})

</script>

<template>
  <template v-if="isInitialLoad">
    <InitialLoading />
  </template>
  <Nav />
  <router-view />
</template>

<style scoped>
</style>
